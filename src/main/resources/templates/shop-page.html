<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>

    <title>Каталог товаров</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <meta name="ctx" th:content="${#httpServletRequest.getContextPath()}"/>
</head>

<body>

<div class="container">
    <br>

    <h1 th:text="Фильтры" />

    <form th:action="@{/products}" method="get">
        <input hidden th:value="${page}" th:name="page">
        <input th:value="${word != null} ? ${word}" th:name="word" type="text" placeholder="Название">
        <input th:value="${min != null} ? ${min}" th:name="min" type="number" placeholder="Минимальная цена">
        <input th:value="${max != null} ? ${max}" th:name="max" type="number" placeholder="Максимальная цена">
        <button type="submit" class="btn btn-primary">Фильтровать</button>
    </form>

    <br>

<!--    <table class="table table-hover">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>Название товара</th>-->
<!--            <th>Категория</th>-->
<!--            <th>Короткое описание</th>-->
<!--            <th>Цена</th>-->
<!--            <th></th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="product : ${products}">-->
<!--            <td th:text="${product.title}"></td>-->
<!--            <td th:text="${product.category.getTitle()}"></td>-->
<!--            <td th:text="${product.description}"></td>-->
<!--            <td th:text="${product.price}"></td>-->
<!--            <td><img th:src="@{'/images/' + ${product.photoName}}" style="width:240px; height:240px;"></td>-->

<!--            &lt;!&ndash;            <td>&ndash;&gt;-->
<!--            &lt;!&ndash;                <img th:if="${product.images.size() > 0}" width="40" height="40" th:src="@{'/images/' + ${product.images[0].path}}" />&ndash;&gt;-->
<!--            &lt;!&ndash;            </td>&ndash;&gt;-->
<!--            <td>-->
<!--                <a th:href="@{'/shop/cart/add/' + ${product.id}}" class="btn btn-primary">Добавить в корзину</a>-->
<!--            </td>-->
<!--            <td>-->
<!--                <a th:href="@{'/comment/' + ${product.id}}" class="btn btn-primary">Оставить комментарий</a>-->
<!--            </td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->

<!--    <div class="ui grid">-->
<!--        <div class="four wide column">-->
<!--            <tr th:each="product : ${products}">-->
<!--                <div class="image">-->
<!--                    <img src="/images/9.jpg">-->
<!--                </div>-->
<!--                <div class="content">-->
<!--                    <td th:text="${product.title}"></td>-->
<!--                    <td th:text="${product.price}"></td>-->
<!--                </div>-->
<!--            </div>-->
<!--         </div>-->



    <div class="ui four column grid">
        <tr th:each="product : ${products}">
        <div class="column">
            <div class="ui segment">
              <div> <img th:src="@{'/images/' + ${product.photoName}}" style="width:240px; height:240px;"></td></div>
                <div th:text="${product.title}"></div>
                <div th:text="${product.price}"></div>
                <div>
                    <a th:href="@{'/shop/cart/add/' + ${product.id}}" class="btn btn-primary">Добавить в корзину</a>
                </div>
                <div>
                    <a th:href="@{'/comment/' + ${product.id}}" class="btn btn-primary">Оставить комментарий</a>
                </div>
            </div>
        </div>
    </div>

<!--    <nav aria-label="Page navigation example">-->
<!--        <ul class="pagination">-->
<!--            <li class="page-item"><a class="page-link" href="#">Previous</a></li>-->
<!--            <li th:each="i : ${#numbers.sequence(1, totalPage, 1)}">-->
<!--                <a th:class="page-link" th:text="${i}" th:classappend="${page == i ? 'active' : ''}" th:href="@{'/products/?page=' + ${i} + ${filters}}"></a>-->
<!--            </li>-->
<!--            <li class="page-item"><a class="page-link" href="#">Next</a></li>-->
<!--        </ul>-->
<!--    </nav>-->



    <nav aria-label="Pagination" th:if="${products.totalPages gt 0}">
        <ul class="pagination justify-content-center font-weight-medium">
            <li class="page-item" th:classappend="${products.number eq 0} ? 'disabled'">
                <a class="page-link svg-icon"
                   th:href="@{/products?page={id}(id=${products.number lt 2 ? 1 : products.number})}"
                   aria-label="Previous"
                   title="Previous Page" rel="tooltip">
                    <span aria-hidden="true" data-feather="chevrons-left" width="20" height="20">Previous</span>
                </a>
            </li>
            <li class="page-item" th:classappend="${i eq products.number + 1} ? 'active'"
                th:each="i : ${#numbers.sequence( products.number + 1, products.totalPages > 12 + products.number ? products.number + 12 : products.totalPages, 1)}">
                <a class="page-link" th:href="@{/products?page={id}(id=${i})}" th:text="${i}"
                   th:title="${'Page '+ i}"
                   rel="tooltip"></a>
            </li>
            <li class="page-item disabled" th:if="${products.number + 12 < products.totalPages}">
                <a class="page-link svg-icon" href="#">
                    <span data-feather="more-horizontal" width="20" height="20"></span>
                </a>
            </li>
            <li class="page-item" th:classappend="${products.number + 1 eq products.totalPages} ? 'disabled'">
                <a class="page-link svg-icon" th:href="@{/products?page={id}(id=${products.number + 2})}"
                   aria-label="Next"
                   title="Next Page" rel="tooltip">
                    <span aria-hidden="true" data-feather="chevrons-right" width="20" height="20">Next</span>
                </a>
            </li>
        </ul>
    </nav>


</div>

</body>
</html>